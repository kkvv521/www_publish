(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-component-codecorrelation-codedivide"],{"13c8":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniDatetimePicker:i("2713").default,selectLay:i("1f71").default,kkSelectMore:i("7b96").default,uniIcons:i("27b3").default,uniRow:i("f33c").default,uniCol:i("71df").default,uniSwipeAction:i("4d31").default,uniSwipeActionItem:i("d2ac").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"mcontainer"},[i("v-uni-view",{staticClass:"uni-flex uni-row",staticStyle:{"align-items":"center","justify-content":"flex-start"}},[i("uni-datetime-picker",{staticStyle:{"margin-right":"10px",width:"300px"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),i("uni-datetime-picker",{staticStyle:{"margin-right":"10px",width:"300px"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),i("select-lay",{staticStyle:{"min-width":"300px","margin-right":"10px","z-index":"1"},attrs:{value:t.typeval,name:"name",slabel:"name",svalue:"name",placeholder:"请选择",options:t.typeList},on:{selectitem:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTypeitem.apply(void 0,arguments)}}}),i("kk-select-more",{ref:"selectMore",attrs:{selectAllBtn:!1,selectNum:2,space:"÷",datas:t.codeList,groupList:t.groupList},on:{valueChange:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"uni-flex uni-row",staticStyle:{"align-items":"center","margin-left":"20px"}},[i("uni-icons",{attrs:{type:t.isColleted().icon,color:t.isColleted().color,size:20},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addCollect.apply(void 0,arguments)}}}),i("v-uni-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCorrorData.apply(void 0,arguments)}}},[t._v("分析")])],1)],1),i("uni-row",{staticStyle:{padding:"10px 20px 0px 30px"},attrs:{gutter:10}},[i("uni-col",{attrs:{xs:3,sm:3,md:3,lg:3,xl:3}},[i("v-uni-view",{staticClass:"collect-list"},[t._v("收藏"),i("uni-swipe-action",t._l(t.colletList,(function(e,n){return i("uni-swipe-action-item",{key:e.codes,attrs:{threshold:0,"right-options":t.right_btns},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteCollect(e)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.editListChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"content-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectCollectChange(e)}}},[t.select_collect!=e?i("v-uni-view",{staticClass:"collect-item"},[t._v(t._s(e.codes.replace(",","/")))]):t._e(),t.select_collect==e?i("v-uni-view",{staticClass:"collect-item-select"},[t._v(t._s(e.codes.replace(",","/")))]):t._e()],1)],1)})),1)],1)],1),i("uni-col",{attrs:{xs:21,sm:21,md:21,lg:21,xl:21}},[i("div",{style:{height:"500px"},attrs:{id:"myChart"}})])],1)],1)},o=[]},"1ec7":function(t,e,i){"use strict";var n=i("bf3f"),s=i.n(n);s.a},"2a9f":function(t,e,i){"use strict";i("a15b"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("c76a");i("554a"),i("1a8f"),i("65d0");var s={data:function(){return{loading:!1,typeList:[{type:"",name:"现货"},{type:"u",name:"U本位"},{type:"b",name:"B本位"}],typeIndex:0,typeval:"现货",codeList:[],groupList:[],colletList:[],showEditState:"none",editChangeTime:0,select_collect:null,startTime:this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),endTime:this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),selectCodes:[],right_btns:[{text:"删除",style:{backgroundColor:"#007aff"}}],lineOption:{notMerge:!0,tooltip:{trigger:"axis",positionStatus:!0,formatterStatus:!0,formatterUnit:"",formatFloat2:!0,formatThousands:!0},legend:{data:["assets","benchmark"]},xAxis:{type:"category",data:[],silent:!1},yAxis:[{type:"value"}],series:[]},myChart:null}},methods:{isColleted:function(){var t=this.selectCodes.join(",");for(var e in this.colletList)if(this.colletList[e]["codes"]==t&&this.colletList[e]["ftype"]==this.typeList[this.typeIndex].type)return this.select_collect=this.colletList[e],{isColleted:!0,icon:"star-filled",color:"#ff0000"};return{isColleted:!1,icon:"star",color:""}},editListChange:function(t){this.editChangeTime=(new Date).getTime(),this.showEditState=t},getCodeMsg:function(){var t=this;this.loading=!0,this.$request.post("/code",{action:"simple_list"}).then((function(e){t.loading=!1,"WRONG"!=e&&(t.codeList=e.result)})),this.$request.post("/codegroup",{action:"simple_list"}).then((function(e){"WRONG"!=e&&(t.groupList=e.result)})),this.getCollectMsg()},getCollectMsg:function(){var t=this;this.$request.post("/codecorrelation",{action:"divide_collet_list"}).then((function(e){"WRONG"!=e&&(t.colletList=e.result)}))},getCorrorData:function(){var t=this;this.$refs["selectMore"].closePop(),this.loading=!0,uni.showLoading({});var e={action:"divide",start_time:this.startTime,end_time:this.endTime,ftype:this.typeList[this.typeIndex].type,codes:this.selectCodes};this.$request.post("/codecorrelation",e).then((function(e){if(uni.hideLoading(),"WRONG"!=e){null==t.myChart&&(t.myChart=n.init(document.getElementById("myChart")));var i=t.parseCodeNames(e.result.code),s=i[0]+"/"+i[1];t.lineOption.xAxis.data=e.result.time,t.lineOption.series=[{name:s,type:"line",emphasis:{focus:"series"},data:e.result.list}],t.myChart.setOption(t.lineOption)}}))},addCollect:function(){var t=this;if(this.isColleted().isColleted)this.deleteCollect(this.select_collect);else{var e={action:"divide_collet_add",start_time:this.startTime,ftype:this.typeList[this.typeIndex].type,codes:this.selectCodes};this.$request.post("/codecorrelation",e).then((function(e){uni.hideLoading(),"WRONG"!=e&&t.getCollectMsg()}))}},deleteCollect:function(t){var e=this,i={action:"divide_collet_delete",id:t.id};this.$request.post("/codecorrelation",i).then((function(t){uni.hideLoading(),"WRONG"!=t&&e.getCollectMsg()}))},selectCollectChange:function(t){if(!("none"!=this.showEditState||(new Date).getTime()-this.editChangeTime<500)){for(var e in this.select_collect=t,this.startTime=t.start_time,this.endTime=this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),this.typeList)if(this.typeList[e].type==t.ftype){this.typeIndex=e,this.typeval=this.typeList[e].name;break}null!=t.codes&&""!=t.codes&&(this.$refs["selectMore"].set_value(t.codes.split(",")),this.getCorrorData())}},codeChange:function(t){this.selectCodes=t},parseCodeNames:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].replace("BINANCE.","").replace("_U","").replace("_B",""));return e}},mounted:function(){this.getCodeMsg()},onLoad:function(){}};e.default=s},bf3f:function(t,e,i){var n=i("e29e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("4f06").default;s("072a9418",n,!0,{sourceMap:!1,shadowMode:!1})},ddd8:function(t,e,i){"use strict";i.r(e);var n=i("2a9f"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},e29e:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".mcontainer[data-v-5517e490]{background-color:#fff;min-height:700px;padding:10px 5px 10px 5px}.collect-item[data-v-5517e490]{color:#646464;cursor:pointer;margin-top:5px;padding:1px 5px 1px 5px}.collect-item-select[data-v-5517e490]{color:#646464;cursor:pointer;margin-top:5px;padding:1px 5px 1px 5px;background-color:#eaeaea}.collect-list[data-v-5517e490]{text-align:center;border-width:1px;border-style:solid;border-color:#c8c8c8;overflow:auto;height:550px;padding:4px;margin-top:30px;border-radius:4px}",""]),t.exports=e},f851:function(t,e,i){"use strict";i.r(e);var n=i("13c8"),s=i("ddd8");for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("1ec7");var a,l=i("f0c5"),c=Object(l["a"])(s["default"],n["b"],n["c"],!1,null,"5517e490",null,!1,n["a"],a);e["default"]=c.exports}}]);