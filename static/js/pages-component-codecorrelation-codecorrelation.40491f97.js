(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-component-codecorrelation-codecorrelation"],{1251:function(t,e,i){"use strict";i.r(e);var a=i("b3b8"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},1870:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uniDatetimePicker:i("2713").default,selectLay:i("1f71").default,kkSelectMore:i("7b96").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"mcontainer"},[i("v-uni-view",{staticClass:"uni-flex uni-row",staticStyle:{"align-items":"center"}},[i("uni-datetime-picker",{staticStyle:{"margin-right":"10px",width:"300px"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),i("uni-datetime-picker",{staticStyle:{"margin-right":"10px",width:"300px"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),i("select-lay",{staticStyle:{"min-width":"300px","margin-right":"10px","z-index":"1"},attrs:{value:t.typeval,name:"name",slabel:"name",svalue:"name",placeholder:"请选择",options:t.typeList},on:{selectitem:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTypeitem.apply(void 0,arguments)}}}),i("kk-select-more",{ref:"selectMore",attrs:{datas:t.codeList,groupList:t.groupList},on:{valueChange:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),i("v-uni-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCorrorData.apply(void 0,arguments)}}},[t._v("分析")])],1),i("div",{style:{height:"700px"},attrs:{id:"myChart"}})],1)},o=[]},"365b":function(t,e,i){var a=i("a105");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0058c6ae",a,!0,{sourceMap:!1,shadowMode:!1})},"606a":function(t,e,i){"use strict";i.r(e);var a=i("1870"),n=i("1251");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b2af");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"03143a10",null,!1,a["a"],r);e["default"]=l.exports},a105:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".mcontainer[data-v-03143a10]{background-color:#fff;min-height:700px;padding:10px 5px 10px 5px}.add-box[data-v-03143a10]{border-color:#f33;border-width:2px;border-style:solid;-webkit-align-self:center;align-self:center}.code-content[data-v-03143a10]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.code-item[data-v-03143a10]{color:#e80080;border-color:#e80080;border-width:1px;border-style:solid;padding:4px 6px 4px 6px;width:-webkit-fit-content;width:fit-content;border-radius:5px;margin-right:10px}.grid[data-v-03143a10]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.grid-item-box[data-v-03143a10]{text-align:center}.grid-item-box .hover[data-v-03143a10]{visibility:hidden}.grid-item-txt[data-v-03143a10]{position:absolute;background-color:hsla(0,0%,100%,.7);width:-webkit-fit-content;width:fit-content;top:40%;left:40%;padding:2px 5px 2px 5px;border-radius:5px}.grid-item-code-txt-top[data-v-03143a10]{position:relative;top:-25px;text-align:center}.grid-item-code-txt-left[data-v-03143a10]{position:relative;top:40%;left:-80px;text-align:left}",""]),t.exports=e},b2af:function(t,e,i){"use strict";var a=i("365b"),n=i.n(a);n.a},b3b8:function(t,e,i){"use strict";i("99af"),i("a15b"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("c76a");i("554a"),i("1a8f"),i("65d0");var n={data:function(){return{gridName:"grid_",typeList:[{type:"",name:"现货"},{type:"u",name:"U本位"},{type:"b",name:"B本位"}],typeIndex:0,typeval:"现货",codeList:[],codeIndex:0,tval:"",startTime:this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),endTime:this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),corrmaps:null,selectCodes:[],colNum:0,groupList:[],lineOption:{toolbox:{show:!0,right:0,top:5,feature:{saveAsImage:{type:"png",pixelRatio:2}}},tooltip:{confine:!0,formatter:""},grid:{top:"22%"},xAxis:{type:"category",data:[],axisLabel:{interval:0,formatter:function(t){return t.split("").join("\n")}},silent:!1,splitArea:{show:!0},position:"top"},yAxis:{type:"category",data:[],axisLabel:{interval:0},splitArea:{show:!0}},visualMap:{min:-100,max:100,calculable:!0,orient:"horizontal",left:"center",inRange:{color:["#000000","#333333","#c23531"]}},series:[{name:"相关性分析",type:"heatmap",animation:!1,data:[],label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},myChart:null}},computed:{corrmapsList:function(){var t=[];if(null==this.corrmaps||null==this.corrmaps.list)return t;for(var e=0;e<this.corrmaps.list.length;e++)t=t.concat(this.corrmaps.list[e]);return t}},methods:{selectitem:function(t,e){this.codeIndex=t,this.tval=t>=0?this.codeList[t].code:""},selectTypeitem:function(t,e){this.typeIndex=t,this.typeval=t>=0?this.typeList[t].name:""},getCodeMsg:function(){var t=this;this.loading=!0,this.$request.post("/code",{action:"simple_list"}).then((function(e){t.loading=!1,"WRONG"!=e&&(t.codeList=e.result)})),this.$request.post("/codegroup",{action:"simple_list"}).then((function(e){"WRONG"!=e&&(t.groupList=e.result)}))},getCorrorData:function(){var t=this;this.$refs["selectMore"].closePop(),uni.showLoading({});var e={action:"default",start_time:this.startTime,end_time:this.endTime,ftype:this.typeList[this.typeIndex].type,codes:this.selectCodes};this.$request.post("/codecorrelation",e).then((function(e){if(uni.hideLoading(),"WRONG"!=e){t.corrmaps=e.result,t.colNum=t.corrmaps.key.length;var i=t.parseCodeNames(e.result.key);t.lineOption.xAxis.data=i,t.lineOption.yAxis.data=i,t.lineOption.series[0].data=e.result.list,t.lineOption.series[0].label.show=t.colNum<=20;var a=t;t.lineOption.tooltip.formatter=function(t){var e=a.lineOption.xAxis.data[t.value[0]],i=a.lineOption.yAxis.data[t.value[1]];return e+" 和 "+i+" 相关系数： "+t.value[2]},t.myChart.setOption(t.lineOption),t.myChart.resize()}}))},parseCodeNames:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].replace("BINANCE.","").replace("_U","").replace("_B",""));return e},drowChart:function(){this.myChart=a.init(document.getElementById("myChart")),this.myChart.setOption(this.lineOption)},codeChange:function(t){this.selectCodes=t}},mounted:function(){this.drowChart()},onLoad:function(){this.getCodeMsg()}};e.default=n}}]);